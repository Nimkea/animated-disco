Your patch plan looks solid and accurate. Quick review + a few small upgrades to consider:

ğŸ‘ Whatâ€™s correct

Right API: Using useSidebar() and calling setOpenMobile(false) is the proper way to close the Sheet-based sidebar on mobile.

Scoped effect: Guarding with isMobile keeps desktop behavior unchanged.

Coverage: Adding onClick={handleNavClick} to each <Link> ensures taps close the drawer and reveal content immediately.

ğŸ§ª Test checklist (acceptance)

Narrow viewport â‰¤1024px â†’ open sidebar â†’ tap any nav item â†’ sidebar closes and route changes.

Desktop >1024px â†’ tap nav item â†’ sidebar stays open.

Tap the current active menu item â†’ sidebar still closes on mobile.

Use keyboard (Tab + Enter) on a nav item on mobile â†’ closes.

Admin item behaves the same.

Resize from desktopâ†’mobile with sidebar open â†’ tap nav item â†’ closes.

âš ï¸ Small risks / gotchas

Future menu items: If someone adds a new <Link> and forgets the handler, it wonâ€™t auto-close.
Mitigation: Event delegation on the container.

ğŸ› ï¸ Optional improvement (event delegation)

This avoids adding onClick to each link and automatically covers future items:

// In AppSidebar()
const { isMobile, setOpenMobile } = useSidebar();

const handleAnyNavClick: React.MouseEventHandler = (e) => {
  if (!isMobile) return;
  const a = (e.target as HTMLElement).closest<HTMLAnchorElement>("a[href]");
  if (a) setOpenMobile(false);
};

// ...
<SidebarContent onClickCapture={handleAnyNavClick}>
  {/* ...everything else unchanged... */}
</SidebarContent>


You can keep both (per-link + delegation) or switch to delegation only.

ğŸ” Programmatic navigation case

If any part of the app navigates without clicking a link (e.g., navigate('/staking')), the drawer will stay open. If that matters, add a tiny listener:

import { useLocation } from "wouter";
import { useEffect } from "react";
const [pathname] = useLocation();
useEffect(() => {
  if (isMobile) setOpenMobile(false);
}, [pathname, isMobile, setOpenMobile]);

âœ… Definition of done

Mobile/tablet: nav click â†’ drawer closes within the same event loop tick.

Desktop: no behavioral change.

No console errors, no layout jumps, and Lighthouse/Mobile UX improves (fewer taps).